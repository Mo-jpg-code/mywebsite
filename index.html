<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>MeOS</title>
    <style>
        /* --- Global Reset & Base --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden; /* Critical for OS feel */
            background-color: #000; /* Fallback background */
        }

        /* --- MeOS Screen Container --- */
        #meos-screen {
            width: 100vw;
            height: 100vh; /* Use viewport units for full screen */
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            perspective: 1000px; /* For 3D effects if needed */
        }

        /* --- Startup Animation --- */
        #startup-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 1;
            transition: opacity 1s ease-out 0.5s; /* Fade out transition */
        }

        #startup-animation.hidden {
            opacity: 0;
            pointer-events: none; /* Make it unclickable when hidden */
        }

        .startup-logo {
            font-size: 60px;
            font-weight: bold;
            color: #fff;
            opacity: 0;
            animation: logo-appear 2s ease-out 0.5s forwards, 
                       logo-glow 3s ease-in-out 2.5s infinite alternate;
        }
        .startup-logo .M { color: #00aaff; }
        .startup-logo .e { color: #ff00aa; }
        .startup-logo .O { color: #aaff00; }
        .startup-logo .S { color: #ffaa00; }


        .startup-text {
            margin-top: 20px;
            font-size: 18px;
            color: #aaa;
            opacity: 0;
            animation: text-appear 2s ease-out 3s forwards;
        }

        .progress-bar-container {
            width: 70%;
            max-width: 300px;
            height: 8px;
            background-color: #333;
            border-radius: 4px;
            margin-top: 30px;
            overflow: hidden;
            opacity: 0;
            animation: text-appear 1s ease-out 5s forwards;
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #00aaff, #ff00aa);
            border-radius: 4px;
            animation: load-progress 5s ease-out 6s forwards; /* 5s duration, 6s delay */
        }
        /* Total startup animation: ~0.5s (logo) + ~2.5s (logo) + ~5s (progress) + 1s (fade) = 11s+ */


        @keyframes logo-appear {
            to { opacity: 1; transform: scale(1.1); }
        }
        @keyframes logo-glow {
            from { text-shadow: 0 0 5px #fff, 0 0 10px #00aaff, 0 0 15px #00aaff; }
            to { text-shadow: 0 0 10px #fff, 0 0 20px #ff00aa, 0 0 30px #ff00aa; }
        }

        @keyframes text-appear {
            to { opacity: 1; }
        }

        @keyframes load-progress {
            to { width: 100%; }
        }

        /* --- Main Interface --- */
        #main-interface {
            display: none; /* Initially hidden */
            flex-direction: column;
            width: 100%;
            height: 100%;
            opacity: 0;
            animation: interface-fade-in 1s ease-in forwards;
        }

        @keyframes interface-fade-in {
            to { opacity: 1; }
        }

        /* Status Bar */
        #status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 15px;
            /* background-color: rgba(0,0,0,0.2); */ /* Subtle background */
            font-size: 13px;
            height: 30px; /* Fixed height */
            flex-shrink: 0;
        }
        #status-bar .time { font-weight: 500; }
        #status-bar .indicators span { margin-left: 8px; }

        /* App Grid */
        #app-grid {
            flex-grow: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(75px, 1fr));
            gap: 20px;
            padding: 20px;
            overflow-y: auto; /* In case of many apps */
        }

        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease-out, opacity 0.2s ease-out;
        }
        .app-icon:active {
            transform: scale(0.9);
            opacity: 0.7;
        }
        .app-icon .icon-bg {
            width: 60px;
            height: 60px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 15px; /* iOS like */
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
            font-size: 28px; /* Icon size */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .app-icon .app-name {
            font-size: 12px;
            color: #ccc;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 70px;
        }

        /* Specific App Icon Colors */
        .app-icon[data-app="phone"] .icon-bg { background-color: #4CAF50; }
        .app-icon[data-app="messages"] .icon-bg { background-color: #2196F3; }
        .app-icon[data-app="browser"] .icon-bg { background-color: #FF9800; }
        .app-icon[data-app="settings"] .icon-bg { background-color: #757575; }
        .app-icon[data-app="notes"] .icon-bg { background-color: #FFEB3B; color: #333; }
        .app-icon[data-app="zenmode"] .icon-bg { background: linear-gradient(45deg, #da22ff, #9733ee); }
        .app-icon[data-app="gallery"] .icon-bg { background-color: #E91E63; }
        .app-icon[data-app="music"] .icon-bg { background-color: #F44336; }


        /* Dock */
        #dock {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px;
            /* background-color: rgba(0,0,0,0.3); */ /* More prominent background */
            backdrop-filter: blur(10px) saturate(180%);
            -webkit-backdrop-filter: blur(10px) saturate(180%);
            background-color: rgba(40, 40, 40, 0.75);
            border-top: 1px solid rgba(255,255,255,0.1);
            height: 85px; /* Fixed height */
            flex-shrink: 0;
        }
        #dock .app-icon .icon-bg { width: 55px; height: 55px; }


        /* --- App Windows (Modals) --- */
        .app-window {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #1c1c1e; /* Darker app background */
            z-index: 500;
            display: none; /* Hidden by default */
            flex-direction: column;
            opacity: 0;
            transform: translateY(100%);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }
        .app-window.active {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background-color: #333;
            height: 44px; /* iOS-like nav bar height */
            flex-shrink: 0;
        }
        .app-header .app-title { font-size: 17px; font-weight: 600; }
        .app-header .close-app-btn {
            font-size: 16px;
            color: #00aaff;
            cursor: pointer;
            padding: 5px;
        }

        .app-content {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
        }

        /* Specific App Content */
        /* Notes App */
        #notes-app-content textarea {
            width: 100%;
            height: calc(100% - 20px);
            background-color: transparent;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 10px;
            color: #e0e0e0;
            font-size: 16px;
            resize: none;
        }

        /* Settings App */
        .settings-item {
            padding: 15px 0;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .settings-item:last-child { border-bottom: none; }
        .settings-item label { font-size: 16px; }
        .settings-item select, .settings-item input[type="color"] {
            background-color: #444;
            color: #e0e0e0;
            border: none;
            padding: 5px;
            border-radius: 5px;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        .toggle-switch input { display: none; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #555;
            transition: .4s;
            border-radius: 28px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px; width: 20px;
            left: 4px; bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: #00aaff; }
        input:checked + .slider:before { transform: translateX(22px); }


        /* Zen Mode App (Unique Feature Example) */
        #zenmode-app-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        #zenmode-app-content p { margin-bottom: 20px; font-size: 18px; color: #aaa; }
        #zenmode-timer { font-size: 48px; font-weight: bold; margin-bottom: 30px; }


        /* Utility: Coming Soon Message */
        .coming-soon {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            font-size: 20px;
            color: #777;
        }

    </style>
</head>
<body>

    <div id="meos-screen">

        <!-- Startup Animation -->
        <div id="startup-animation">
            <div class="startup-logo">
                <span class="M">M</span><span class="e">e</span><span class="O">O</span><span class="S">S</span>
            </div>
            <div class="startup-text">Initializing Core Systems...</div>
            <div class="progress-bar-container">
                <div class="progress-bar"></div>
            </div>
        </div>

        <!-- Main OS Interface (hidden initially) -->
        <div id="main-interface">
            <!-- Status Bar -->
            <div id="status-bar">
                <span class="time" id="status-time">9:41 AM</span>
                <div class="indicators">
                    <span>📶</span>
                    <span>Wi-Fi</span>
                    <span>🔋100%</span>
                </div>
            </div>

            <!-- App Grid -->
            <div id="app-grid">
                <div class="app-icon" data-app="messages">
                    <div class="icon-bg">💬</div>
                    <span class="app-name">Messages</span>
                </div>
                <div class="app-icon" data-app="gallery">
                    <div class="icon-bg">🖼️</div>
                    <span class="app-name">Gallery</span>
                </div>
                <div class="app-icon" data-app="music">
                    <div class="icon-bg">🎵</div>
                    <span class="app-name">Music</span>
                </div>
                <div class="app-icon" data-app="notes">
                    <div class="icon-bg">📝</div>
                    <span class="app-name">Notes</span>
                </div>
                <div class="app-icon" data-app="camera">
                    <div class="icon-bg">📷</div>
                    <span class="app-name">Camera</span>
                </div>
                <div class="app-icon" data-app="mail">
                    <div class="icon-bg">✉️</div>
                    <span class="app-name">Mail</span>
                </div>
                <div class="app-icon" data-app="maps">
                    <div class="icon-bg">🗺️</div>
                    <span class="app-name">Maps</span>
                </div>
                 <div class="app-icon" data-app="zenmode">
                    <div class="icon-bg">🧘</div>
                    <span class="app-name">Zen Mode</span>
                </div>
                <div class="app-icon" data-app="weather">
                    <div class="icon-bg">☀️</div>
                    <span class="app-name">Weather</span>
                </div>
                <div class="app-icon" data-app="calendar">
                    <div class="icon-bg">📅</div>
                    <span class="app-name">Calendar</span>
                </div>
                <div class="app-icon" data-app="store">
                    <div class="icon-bg">🛍️</div>
                    <span class="app-name">AppStore</span>
                </div>
                <div class="app-icon" data-app="health">
                    <div class="icon-bg">❤️</div>
                    <span class="app-name">Health</span>
                </div>
            </div>

            <!-- Dock -->
            <div id="dock">
                <div class="app-icon" data-app="phone">
                    <div class="icon-bg">📞</div>
                    <span class="app-name">Phone</span>
                </div>
                <div class="app-icon" data-app="browser">
                    <div class="icon-bg">🌐</div>
                    <span class="app-name">Browser</span>
                </div>
                <div class="app-icon" data-app="files">
                    <div class="icon-bg">📁</div>
                    <span class="app-name">Files</span>
                </div>
                <div class="app-icon" data-app="settings">
                    <div class="icon-bg">⚙️</div>
                    <span class="app-name">Settings</span>
                </div>
            </div>
        </div>

        <!-- App Windows (Modals) -->
        <div id="app-window-notes" class="app-window">
            <div class="app-header">
                <span class="app-title">Notes</span>
                <span class="close-app-btn" data-app="notes">Done</span>
            </div>
            <div class="app-content" id="notes-app-content">
                <textarea placeholder="Start typing your note..."></textarea>
            </div>
        </div>

        <div id="app-window-settings" class="app-window">
            <div class="app-header">
                <span class="app-title">Settings</span>
                <span class="close-app-btn" data-app="settings">Close</span>
            </div>
            <div class="app-content" id="settings-app-content">
                <div class="settings-item">
                    <label for="theme-select">Theme</label>
                    <select id="theme-select">
                        <option value="dark">MeOS Dark (Default)</option>
                        <option value="light">MeOS Light (Soon)</option>
                    </select>
                </div>
                <div class="settings-item">
                    <label for="wallpaper-color">Ambient Wallpaper Base</label>
                    <input type="color" id="wallpaper-color" value="#1a1a2e">
                </div>
                 <div class="settings-item">
                    <label for="dynamic-wallpaper-toggle">Dynamic Wallpaper</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="dynamic-wallpaper-toggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="settings-item">
                    <span>Version</span>
                    <span>MeOS 1.0 (Aquila)</span>
                </div>
            </div>
        </div>

        <div id="app-window-zenmode" class="app-window">
            <div class="app-header">
                <span class="app-title">Zen Mode</span>
                <span class="close-app-btn" data-app="zenmode">Exit</span>
            </div>
            <div class="app-content" id="zenmode-app-content">
                <p>Focus. Breathe. Be present.</p>
                <div id="zenmode-timer">10:00</div>
                <button id="start-zen-btn" style="padding: 10px 20px; background-color: #00aaff; border: none; color: white; border-radius: 5px; font-size: 16px;">Start Session</button>
            </div>
        </div>


        <!-- Generic "Coming Soon" App Window -->
        <div id="app-window-coming-soon" class="app-window">
            <div class="app-header">
                <span class="app-title" id="coming-soon-title">App</span>
                <span class="close-app-btn" data-app="coming-soon">Close</span>
            </div>
            <div class="app-content">
                <div class="coming-soon">Feature Coming Soon!</div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const startupAnimation = document.getElementById('startup-animation');
            const mainInterface = document.getElementById('main-interface');
            const statusBarTime = document.getElementById('status-time');
            const appIcons = document.querySelectorAll('.app-icon');
            const appWindows = document.querySelectorAll('.app-window');
            const closeAppBtns = document.querySelectorAll('.close-app-btn');
            const meosScreen = document.getElementById('meos-screen');

            // --- Startup Sequence ---
            // Total duration: 1s (logo) + 2s (text) + 5s (progress) + 1s (interface fade) = 9s for animation
            // Plus 1s for startup fade = 10s. Add more delay if needed for >10s
            // Progress bar animation is 5s, starts after 6s. So 11s total for progress.
            // Startup fade-out transition is 1s, starts after all animations are done.
            // Current startup animation is about 11-12 seconds before main interface is fully usable.
            setTimeout(() => {
                startupAnimation.classList.add('hidden');
                mainInterface.style.display = 'flex'; // Show main interface
            }, 11500); // 11.5 seconds for animations to roughly complete + fade

            // --- Status Bar Time ---
            function updateTime() {
                const now = new Date();
                const hours = now.getHours();
                const minutes = now.getMinutes();
                const ampm = hours >= 12 ? 'PM' : 'AM';
                const formattedHours = hours % 12 === 0 ? 12 : hours % 12;
                const formattedMinutes = minutes < 10 ? '0' + minutes : minutes;
                statusBarTime.textContent = `${formattedHours}:${formattedMinutes} ${ampm}`;
            }
            updateTime();
            setInterval(updateTime, 1000 * 30); // Update every 30 seconds

            // --- App Handling ---
            const workingApps = ['notes', 'settings', 'zenmode']; // Apps that have custom windows

            appIcons.forEach(icon => {
                icon.addEventListener('click', () => {
                    const appName = icon.dataset.app;
                    openApp(appName);
                });
            });

            closeAppBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const appName = btn.dataset.app;
                    // For 'coming-soon', it just closes that generic window.
                    // For others, it refers to their specific window.
                    const windowToClose = (appName === 'coming-soon') ? 
                                          document.getElementById('app-window-coming-soon') : 
                                          document.getElementById(`app-window-${appName}`);
                    if (windowToClose) {
                        windowToClose.classList.remove('active');
                    }
                     // Stop Zen timer if exiting Zen Mode
                    if (appName === 'zenmode' && zenInterval) {
                        clearInterval(zenInterval);
                        zenTime = 10 * 60; // Reset timer
                        document.getElementById('zenmode-timer').textContent = "10:00";
                        document.getElementById('start-zen-btn').disabled = false;

                    }
                });
            });

            function openApp(appName) {
                let targetWindow;
                if (workingApps.includes(appName)) {
                    targetWindow = document.getElementById(`app-window-${appName}`);
                } else {
                    // For non-working apps, show a generic "Coming Soon" window
                    targetWindow = document.getElementById('app-window-coming-soon');
                    const comingSoonTitle = document.getElementById('coming-soon-title');
                    comingSoonTitle.textContent = appName.charAt(0).toUpperCase() + appName.slice(1); // Capitalize
                }

                if (targetWindow) {
                    // Close any currently active window first
                    appWindows.forEach(win => win.classList.remove('active'));
                    // Then open the new one
                    targetWindow.classList.add('active');
                }
            }

            // --- Settings App Functionality ---
            const wallpaperColorInput = document.getElementById('wallpaper-color');
            const dynamicWallpaperToggle = document.getElementById('dynamic-wallpaper-toggle');
            let dynamicWallpaperInterval;

            wallpaperColorInput.addEventListener('input', (e) => {
                if (!dynamicWallpaperToggle.checked) {
                    meosScreen.style.background = e.target.value;
                }
            });
            
            function setDynamicWallpaper() {
                const hue = Math.floor(Math.random() * 360);
                const saturation = 30 + Math.floor(Math.random() * 30); // 30-60%
                const lightness = 10 + Math.floor(Math.random() * 10); // 10-20%
                meosScreen.style.background = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
            }

            dynamicWallpaperToggle.addEventListener('change', (e) => {
                if (e.target.checked) {
                    setDynamicWallpaper(); // Initial set
                    dynamicWallpaperInterval = setInterval(setDynamicWallpaper, 10000); // Change every 10s
                } else {
                    clearInterval(dynamicWallpaperInterval);
                    // Revert to selected static color or default gradient
                    const staticColor = wallpaperColorInput.value;
                    meosScreen.style.background = staticColor || 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)';
                }
            });
            // Initial dynamic wallpaper set if checked
            if (dynamicWallpaperToggle.checked) {
                setDynamicWallpaper();
                dynamicWallpaperInterval = setInterval(setDynamicWallpaper, 10000);
            }


            // --- Zen Mode App Functionality ---
            const zenTimerDisplay = document.getElementById('zenmode-timer');
            const startZenBtn = document.getElementById('start-zen-btn');
            let zenTime = 10 * 60; // 10 minutes in seconds
            let zenInterval;

            function updateZenTimer() {
                const minutes = Math.floor(zenTime / 60);
                let seconds = zenTime % 60;
                seconds = seconds < 10 ? '0' + seconds : seconds;
                zenTimerDisplay.textContent = `${minutes}:${seconds}`;
                if (zenTime > 0) {
                    zenTime--;
                } else {
                    clearInterval(zenInterval);
                    zenTimerDisplay.textContent = "Done!";
                    startZenBtn.disabled = false;
                }
            }

            startZenBtn.addEventListener('click', () => {
                if (zenInterval) clearInterval(zenInterval); // Clear existing if any
                zenTime = 10 * 60; // Reset
                updateZenTimer(); // Show initial time
                zenInterval = setInterval(updateZenTimer, 1000);
                startZenBtn.disabled = true;
            });

        });

        // Prevent pinch zoom and double tap zoom for a more native feel
        document.addEventListener('gesturestart', function (e) { e.preventDefault(); });
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
          const now = (new Date()).getTime();
          if (now - lastTouchEnd <= 300) { // If taps are less than 300ms apart
            event.preventDefault();
          }
          lastTouchEnd = now;
        }, false);

    </script>
</body>
</html>
